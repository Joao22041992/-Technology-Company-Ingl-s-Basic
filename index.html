<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Grammar Practice: Questions</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome for Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .hero-section {
            background: linear-gradient(135deg, #000000, #000307);
            color: white;
            padding: 2rem 0;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            margin-bottom: 2rem;
        }
        .exercise-card {
            transition: transform 0.2s;
            border: none;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
        }
        .exercise-card:hover {
            transform: translateY(-3px);
        }
        .translation-text {
            color: #6c757d;
            font-style: italic;
            border-top: 1px dashed #dee2e6;
            margin-top: 10px;
            padding-top: 5px;
            display: none; /* Hidden by default */
        }
        .feedback-msg {
            margin-top: 10px;
            font-weight: bold;
            display: none;
        }
        .nav-link-custom {
            font-size: 1.2rem;
            font-weight: 500;
        }
        .instruction-box {
            background-color: #ffffff;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin-bottom: 30px;
            border-radius: 4px;
        }
        .correct-answer-display {
            font-size: 0.9em;
            color: #198754;
        }
    </style>
</head>
<body>

    <!-- Navbar with Hamburger Menu -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fas fa-graduation-cap me-2"></i>  Technology Company</a>
            
            <!-- Hamburger Button (Right aligned) -->
            <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Offcanvas Menu -->
            <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Menu</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                        <li class="nav-item">
                            <a class="nav-link active btn btn-outline-light text-primary mt-2 mt-lg-0" style="background:white; border:none;" href="grammar.html">Grammar</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- Content Wrapper -->
    <div class="container pb-5">

        <!-- RF003: Explicação Gramatical -->
        <div class="hero-section text-center">
            <div class="container">
                <h1>Asking Questions in English</h1>
                <p class="lead">Learn Simple Past, Present, and Wh-Questions</p>
                
                <div class="row justify-content-center mt-4 text-start">
                    <div class="col-md-8">
                        <div class="card text-dark">
                            <div class="card-body">
                                <h5 class="card-title text-primary"><i class="fas fa-book-open me-2"></i>Grammar Rules</h5>
                                <ul class="list-unstyled">
                                    <li class="mb-2"><strong>1. Simple Past:</strong> Use <em>Did</em> + Subject + Base Verb? <br><small class="text-muted">Ex: Did you go?</small></li>
                                    <li class="mb-2"><strong>2. Simple Present:</strong> Use <em>Do/Does</em> + Subject + Base Verb? <br><small class="text-muted">Ex: Do you like pizza? / Does she work here?</small></li>
                                    <li class="mb-2"><strong>3. Wh-Questions:</strong> Word (Who, What, Where, When, How) + Auxiliary + Subject?<br><small class="text-muted">Ex: Where did you go?</small></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RF004/RF007: Instruções em Português -->
        <div class="instruction-box">
            <h4><i class="fas fa-info-circle me-2"></i>Instruções</h4>
            <p class="mb-0">
                Abaixo você encontrará 30 exercícios divididos em três categorias. 
                Responda em <strong>Inglês</strong>. Use o botão "Translate" para ver a tradução da frase se precisar de ajuda. 
                Clique em "Check" para verificar sua resposta instantaneamente.
            </p>
        </div>

        <!-- Navegação por Abas para os Tipos de Exercícios -->
        <ul class="nav nav-pills mb-4 justify-content-center" id="exercises-top" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="pills-gap-tab" data-bs-toggle="pill" data-bs-target="#pills-gap" type="button" role="tab">1. Fill in the Blanks</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-complete-tab" data-bs-toggle="pill" data-bs-target="#pills-complete" type="button" role="tab">2. Complete Sentences</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-choice-tab" data-bs-toggle="pill" data-bs-target="#pills-choice" type="button" role="tab">3. Multiple Choice</button>
            </li>
        </ul>

        <!-- Conteúdo das Abas (RF005/RF006) -->
        <div class="tab-content" id="pills-tabContent">
            
            <!-- 10 Exercícios: Preencher Lacunas -->
            <div class="tab-pane fade show active" id="pills-gap" role="tabpanel">
                <div class="row" id="gap-container">
                    <!-- JS will populate this -->
                </div>
            </div>

            <!-- 10 Exercícios: Completar Frases -->
            <div class="tab-pane fade" id="pills-complete" role="tabpanel">
                <div class="row" id="complete-container">
                    <!-- JS will populate this -->
                </div>
            </div>

            <!-- 10 Exercícios: Múltipla Escolha -->
            <div class="tab-pane fade" id="pills-choice" role="tabpanel">
                <div class="row" id="choice-container">
                    <!-- JS will populate this -->
                </div>
            </div>

        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // --- DATA SOURCE (RF005, RF006) ---
        
        // 1. Fill in the Blanks Data
        const gapData = [
            { id: 'g1', question: "Where ___ you go last night?", translation: "Onde você foi ontem à noite?", answer: "did" },
            { id: 'g2', question: "___ she like chocolate?", translation: "Ela gosta de chocolate?", answer: "does" },
            { id: 'g3', question: "What ___ they eating now?", translation: "O que eles estão comendo agora?", answer: "are" },
            { id: 'g4', question: "___ you play soccer yesterday?", translation: "Você jogou futebol ontem?", answer: "did" },
            { id: 'g5', question: "When ___ the bus arrive?", translation: "Quando o ônibus chega?", answer: "does" },
            { id: 'g6', question: "___ your brother working today?", translation: "Seu irmão está trabalhando hoje?", answer: "is" },
            { id: 'g7', question: "How ___ you travel to school?", translation: "Como você vai para a escola?", answer: "do" },
            { id: 'g8', question: "Who ___ you see at the party?", translation: "Quem você viu na festa?", answer: "did" },
            { id: 'g9', question: "___ they speak English?", translation: "Eles falam inglês?", answer: "do" },
            { id: 'g10', question: "Why ___ she crying?", translation: "Por que ela está chorando?", answer: "is" }
        ];

        // 2. Complete/Unscramble Sentences Data
        // Answer logic will check if the user input includes key structure or matches exactly
        const completeData = [
            { id: 'c1', prompt: "Unscramble: you / did / what / buy ?", translation: "O que você comprou?", answer: "What did you buy" },
            { id: 'c2', prompt: "Unscramble: live / do / where / you ?", translation: "Onde você mora?", answer: "Where do you live" },
            { id: 'c3', prompt: "Unscramble: she / calling / is / who ?", translation: "Para quem ela está ligando?", answer: "Who is she calling" },
            { id: 'c4', prompt: "Make it negative past: Did you go?", translation: "Eu não fui. (Traduza: I didn't go)", answer: "I didn't go" },
            { id: 'c5', prompt: "Unscramble: arrive / when / they / did ?", translation: "Quando eles chegaram?", answer: "When did they arrive" },
            { id: 'c6', prompt: "Unscramble: like / do / pizza / you ?", translation: "Você gosta de pizza?", answer: "Do you like pizza" },
            { id: 'c7', prompt: "Make question: She lives in Rio. (Where...)", translation: "Onde ela mora?", answer: "Where does she live" },
            { id: 'c8', prompt: "Unscramble: sad / why / are / you ?", translation: "Por que você está triste?", answer: "Why are you sad" },
            { id: 'c9', prompt: "Make it negative present: Do you smoke?", translation: "Eu não fumo. (Traduza: I don't smoke)", answer: "I don't smoke" },
            { id: 'c10', prompt: "Unscramble: how / work / does / it ?", translation: "Como isso funciona?", answer: "How does it work" }
        ];

        // 3. Multiple Choice Data
        const choiceData = [
            { id: 'm1', question: "___ you watch TV last night?", translation: "Você assistiu TV ontem à noite?", options: ["Do", "Did", "Are"], answer: "Did" },
            { id: 'm2', question: "Where ___ she work?", translation: "Onde ela trabalha?", options: ["do", "does", "is"], answer: "does" },
            { id: 'm3', question: "___ they playing football?", translation: "Eles estão jogando futebol?", options: ["Do", "Did", "Are"], answer: "Are" },
            { id: 'm4', question: "What ___ you do yesterday?", translation: "O que você fez ontem?", options: ["did", "do", "were"], answer: "did" },
            { id: 'm5', question: "Who ___ that man?", translation: "Quem é aquele homem?", options: ["is", "does", "did"], answer: "is" },
            { id: 'm6', question: "___ we have milk?", translation: "Nós temos leite?", options: ["Does", "Do", "Is"], answer: "Do" },
            { id: 'm7', question: "When ___ it happen?", translation: "Quando isso aconteceu?", options: ["did", "was", "were"], answer: "did" },
            { id: 'm8', question: "___ she reading a book?", translation: "Ela está lendo um livro?", options: ["Does", "Is", "Do"], answer: "Is" },
            { id: 'm9', question: "How ___ you?", translation: "Como você está?", options: ["are", "do", "did"], answer: "are" },
            { id: 'm10', question: "___ he call you?", translation: "Ele te ligou?", options: ["Did", "Was", "Were"], answer: "Did" }
        ];

        // --- RENDERING FUNCTIONS (RF001, RF002, RF008, RF009, RF010) ---

        function createCard(item, type) {
            let inputHtml = '';
            
            if (type === 'gap' || type === 'complete') {
                inputHtml = `<input type="text" class="form-control mb-2" id="input-${item.id}" placeholder="Type your answer in English" autocomplete="off">`;
            } else if (type === 'choice') {
                inputHtml = `<div class="d-flex gap-2 justify-content-center mb-2">`;
                item.options.forEach(opt => {
                    inputHtml += `
                        <input type="radio" class="btn-check" name="options-${item.id}" id="opt-${item.id}-${opt}" value="${opt}" autocomplete="off">
                        <label class="btn btn-outline-primary" for="opt-${item.id}-${opt}">${opt}</label>
                    `;
                });
                inputHtml += `</div>`;
            }

            // Translation Toggle Button (RF008)
            const translationBtn = `
                <button class="btn btn-sm btn-outline-secondary mb-2" onclick="toggleTranslation('${item.id}')">
                    <i class="fas fa-language"></i> Translate
                </button>
            `;

            // Check Button (RF010)
            const checkBtn = `
                <button class="btn btn-success w-100" onclick="checkAnswer('${item.id}', '${type}', '${item.answer}')">
                    <i class="fas fa-check"></i> Check Answer
                </button>
            `;

            // Display Question logic
            let displayQ = item.question || item.prompt;

            return `
                <div class="col-md-6 col-lg-4">
                    <div class="card exercise-card h-100">
                        <div class="card-body text-center d-flex flex-column">
                            <h5 class="card-title text-primary mb-3">${displayQ}</h5>
                            
                            ${translationBtn}
                            <div id="trans-${item.id}" class="translation-text mb-3">${item.translation}</div>
                            
                            <div class="mt-auto">
                                ${inputHtml}
                                ${checkBtn}
                                <div id="feedback-${item.id}" class="feedback-msg"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- LOGIC FUNCTIONS ---

        function renderExercises() {
            const gapContainer = document.getElementById('gap-container');
            const completeContainer = document.getElementById('complete-container');
            const choiceContainer = document.getElementById('choice-container');

            gapData.forEach(item => gapContainer.innerHTML += createCard(item, 'gap'));
            completeData.forEach(item => completeContainer.innerHTML += createCard(item, 'complete'));
            choiceData.forEach(item => choiceContainer.innerHTML += createCard(item, 'choice'));
        }

        // Toggle Translation (RF008, RF009) - RNF003 (Instant)
        window.toggleTranslation = function(id) {
            const el = document.getElementById(`trans-${id}`);
            if (el.style.display === "block") {
                el.style.display = "none";
            } else {
                el.style.display = "block";
            }
        };

        // Check Answer Logic (RF010)
        window.checkAnswer = function(id, type, correctAnswer) {
            let userAnswer = '';
            const feedbackEl = document.getElementById(`feedback-${id}`);
            
            // Get value based on type
            if (type === 'gap' || type === 'complete') {
                userAnswer = document.getElementById(`input-${id}`).value.trim();
            } else if (type === 'choice') {
                const checked = document.querySelector(`input[name="options-${id}"]:checked`);
                if (checked) userAnswer = checked.value;
            }

            if (!userAnswer) {
                feedbackEl.innerHTML = `<span class="text-warning"><i class="fas fa-exclamation-triangle"></i> Please answer first.</span>`;
                feedbackEl.style.display = 'block';
                return;
            }

            // Normalization for comparison (case insensitive, remove extra punctuation for simpler check)
            const cleanUser = userAnswer.toLowerCase().replace(/[.,?!]/g, '').trim();
            const cleanCorrect = correctAnswer.toLowerCase().replace(/[.,?!]/g, '').trim();

            if (cleanUser === cleanCorrect) {
                feedbackEl.innerHTML = `<span class="text-success"><i class="fas fa-check-circle"></i> Correct! Good job.</span>`;
                feedbackEl.className = "feedback-msg alert alert-success p-1";
            } else {
                feedbackEl.innerHTML = `
                    <span class="text-danger"><i class="fas fa-times-circle"></i> Incorrect. Try again!</span>
                    <div class="correct-answer-display mt-1">Answer: ${correctAnswer}</div>
                `;
                feedbackEl.className = "feedback-msg alert alert-danger p-1";
            }
            feedbackEl.style.display = 'block';
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', renderExercises);

    </script>
</body>
</html>
